

#angle_bisector:
#  - "{p0} is a point such that ∠{p1}{p2}{p0} = ∠{p0}{p2}{p3}. "
#  - "{p0} is a point such that ∠{p1}{p2}{p0} is equal to ∠{p0}{p2}{p3}. "
# Construct a point X on the angle bisector of ∠ABC
angle_bisector: # X A B C
  num_args: 4

  rules:
    point: [0]
    angle1: [1, 2, 0]
    angle2: [0, 2, 3]
    angle_full: {type: angle, args: [1, 2, 3]}
    bisector: {type: literal, args: ['bisector', 'angle bisector']}
    the: {type: literal, args: ['the', 'a']}
    angles: {type: conjunction, args: [angle1, angle2]}
    eqangles: {type: equality, args: [angle1, angle2]}

  templates:
    - "{point} is {the} {bisector} of {angle_full}"
    - "{point} bisects {angle_full}"

    - "{point} bisects {angles}"
    - "{angles} are bisected by {point}"

    - "{point} is on {the} {bisector} of {angles}"
    - "{point} is {the} {bisector} such that {eqangles}"

#angle_mirror:
#    - "{p0} is a point such that ∠{p1}{p2}{p3} = ∠{p3}{p2}{p0}. "
#    - "{p0} is a point such that ∠{p1}{p2}{p3} is equal to ∠{p3}{p2}{p0}. "
# Construct a point X such that BC is the bisector of ∠ABX
angle_mirror: # X A B C
  num_args: 4

  rules:
    point: [0]
    point_mirror: [1]
    line: [2, 3]
    angle1: [1, 2, 3]
    angle2: [3, 2, 0]
    angle_full: [1, 2, 0]
    angles: {type: conjunction, args: [angle1, angle2]}
    eqangles: {type: equality, args: [angle1, angle2]}

  templates:
    - "{point} is reflected across {line}"
    - "{point} is the mirror image of {point_mirror} across {line}"

    - "{line} is the bisector of {angle_full}"
    - "{point} is a point such that {eqangles}"

#circle:
#    - "{p0} is the centre of the circle that passes through {p1}, {p2}, {p3}. "
# Construct a point X as the circumcenter of A, B, C
circle: # X A B C
  num_args: 4

  rules:
      point: [0]
      triangle: [1, 2, 3]
      circle: [0, 1, 2, 3]
      points: {type: conjunction, args: [p1, p2, p3]}
      corners: {type: ref, args: [points, triangle]}
      passing: {type: literal, args: ['that passes through', 'passing through']}

  templates:
#      - "{point} is the circumcenter of {corners}"
      - "{point} is the center of the circle {passing} {points}"
      - "the center of the circle {passing} {points} is {point}"
      - "{point} is the center of {circle}"

#circumcenter:
#    - "{p0} is the centre of the circumcenter of the triangle {p1}{p2}{p3}. "
#
circumcenter:
    num_args: 4

    rules:
        point: [0]
        triangle: [1, 2, 3]
        points: {type: conjunction, args: [p1, p2, p3]}
        corners: {type: ref, args: [points, triangle]}

    templates:
      - "{point} is the circumcenter of {corners}"

#eq_quadrangle:
#    - "{p0}{p1}{p2}{p3} is a quadrilateral with {p0}{p3} = {p1}{p2}. "
# Construct quadrilateral ABCD such that AB = CD
eq_quadrilateral: # A B C D
  num_args: 4

  rules:
    quadrilateral: [0, 1, 2, 3]
    line1: [0, 3]
    line2: [1, 2]
    corners: {type: ord-conjunction, args: [p0, p1, p2, p3]}
    eqsides: {type: equality, args: [line1, line2]}
    where: {type: literal, args: ['with', 'such that', 'where']}
    desc: {type: ref, args: [quadrilateral, corners]}

  templates:
    - "{desc} is a quadrilateral {where} {eqsides}"
    - "{corners} forms a quadrilateral {where} {eqsides}"

#eq_trapezoid:
#    - "{p0}{p1}{p2}{p3} is an isosceles trapezoid with {p3}{p0} = {p1}{p2}. "
# Construct trapezoid ABCD such that AD = BC
eq_trapezoid: # A B C D
  num_args: 4

  rules:
    trapezoid: [0, 1, 2, 3]
    line1: [0, 3]
    line2: [1, 2]
    corners: {type: ord-conjunction, args: [p0, p1, p2, p3]}
    eqsides: {type: equality, args: [line1, line2]}
    where: {type: literal, args: ['with', 'such that', 'where']}
    desc: {type: ref, args: [trapezoid, corners]}

  templates:
    - "{desc} is a trapezoid {where} {eqsides}"
    - "{corners} forms a trapezoid {where} {eqsides}"

#eq_triangle:
#    - "{p0}{p1}{p2} is an equilateral triangle. "
# Construct an equilateral triangle ABC
eq_triangle: # A B C
  num_args: 3

  rules:
    triangle: [0, 1, 2]
    points: {type: conjunction, args: [p0, p1, p2]}
    line1: [0, 1]
    line2: [1, 2]
    line3: [2, 0]
    eqsides: {type: equality, args: [line1, line2, line3]}
    where: {type: literal, args: ['with', 'such that', 'where']}
    desc: {type: ref, args: [triangle, points]}
    sides: {type: literal, args: ['angles', 'sides']}
    equilateral: {type: literal, args: ['equilateral', 'an equilateral', 'an equilateral triangle']}
    prep: {type: literal, args: ['for', 'in']}
    allof: {type: literal, args: ['all', 'each of the', 'the']}
    equal: {type: literal, args: ['equal', 'congruent', 'equivalent']}

  templates:
    - "{desc} is {equilateral}"
    - "{points} forms an equilateral triangle"
    - "{prep} {triangle}, {allof} {sides} are {equal}"
    - "{allof} {sides} of {triangle} are {equal}"
    - "{prep} {triangle}, {eqsides}"
    - "{eqsides} {prep} {triangle}"

#eqangle2:
#    - "{p0} is a point such that ∠{p2}{p1}{p0} = ∠{p0}{p3}{p2}. "
# Construct a point X such that ∠BAX = ∠XCB
eq_angle: # X A B C
  num_args: 4

  rules:
    point: [0]
    angle1: [2, 1, 0]
    angle2: [0, 3, 2]
    eqangles: {type: equality, args: [angle1, angle2]}
    where: {type: literal, args: ['such that', 'where']}

  templates:
    - "{point} is a point {where} {eqangles}"

#eqdia_quadrangle:
#    - "{p0}{p1}{p2}{p3} is a quadrilateral whose diagonals are equal. "
# Construct a quadrilateral ABCD such that AC = BD
eqdia_quadangle: # A B C D
  num_args: 4

  rules:
    quadrilateral: [0, 1, 2, 3]
    line1: [0, 2]
    line2: [1, 3]
    corners: {type: ord-conjunction, args: [p0, p1, p2, p3]}
    prep: {type: literal, args: ['for', 'in']}
    equal: {type: literal, args: ['equal', 'congruent', 'equivalent']}
    diags: {type: conjunction, args: [line1, line2]}
    eqdiags: {type: equality, args: [line1, line2]}
    where: {type: literal, args: ['such that', 'where']}
    desc: {type: ref, args: [quadrilateral, corners]}

  templates:
    - "{prep} {quadrilateral}, {eqdiags}"
    - "{desc} is a quadrilateral {where} {eqdiags}"
    - "{corners} forms a quadrilateral {where} {eqdiags}"
    - "{diags} are {equal} in {quadrilateral}"
    - "the diagonals of {quadrilateral} are {equal}"
    - "{quadrilateral} has {equal} diagonals"

#eqdistance:
#    - "{p0} is a point such that {p0}{p1} = {p2}{p3}. "
# Construct a point X such that XA = BC
eq_distance: # X A B C
  num_args: 4

  rules:
    point: [0]
    line1: [0, 1]
    line2: [2, 3]
    eqlines: {type: equality, args: [line1, line2]}
    lines: {type: conjunction, args: [line1, line2]}
    where: {type: literal, args: ['such that', 'where']}
    equal: {type: literal, args: ['equal', 'congruent', 'equivalent']}

  templates:
    - "{point} is a point {where} {eqlines}"
    - "{lines} are {equal}"
    - "{eqlines}"

#foot:
#    - "{p0} is the foot of the perpendicular dropped on to {p2}{p3} from {p1}. "
# Construct X as the foot of A on BC
foot: # X A B C
  num_args: 4

  rules:
    point: [0]
    point_foot: [1]
    line: [2, 3]
    line_perp: [0, 1]
    where: {type: literal, args: ['of the perpendicular dropped on to', 'from']}

  templates:
    - "{point} is the foot of {point_foot} on {line}"
    - "{point} is on {line} and {line_perp} is perpendicular to {line}"
    - "the foot of {point_foot} on {line} is {point}"

#incenter:
#    - "{p0} is is the incentre of triangle {p1}{p2}{p3}. "
# Construct a point X as the incenter of ABC
incenter: # X A B C
  num_args: 4

  rules:
    point: [0]
    triangle: [1, 2, 3]
    points: {type: conjunction, args: [p1, p2, p3]}
    desc: {type: ref, args: [points, triangle]}
    the: {type: literal, args: ['the', 'the point of']}
    meet: {type: literal, args: ['intersection of the angle bisectors', 'concurrence of the angle bisectors',
                                 'meeting point of the angle bisectors']}
    loc: {type: literal, args: ['is', 'is located at', 'is at']}

  templates:
    - "{point} {loc} the incenter of {desc}"
    - "{triangle} has incenter {point}"
    - "the incenter of {triangle} {loc} {point}"
    - "{point} {loc} {the} {meet} of {triangle}"

#incenter2: # TODO(Partha): opportunity to augment! Symantic!  Also use respectively!
#    - "{p3} is is the incentre of triangle {p4}{p5}{p6}. The incircle touches the arm {p4}{p5} at {p2}, the arm {p5}{p6} at {p0} and the arm {p6}{p4} at {p1}. "
incenter2: # X Y Z I A B C
    num_args: 7

    rules:
        point: [3]
        triangle: [4, 5, 6]
        points: {type: ord-conjunction, args: [p4, p5, p6]}
        desc: {type: ref, args: [points, triangle]}
        the: {type: literal, args: ['the', 'the point of']}
        meet: {type: literal, args: ['intersection of the angle bisectors', 'concurrence of the angle bisectors',
                                     'meeting point of the angle bisectors']}
        loc: {type: literal, args: ['is', 'is located at', 'is at']}
        incircle: {type: literal, args: ['incircle', 'the incircle']}
        touches: {type: literal, args: ['touches', 'intersects', 'meets']}
        line1: [4, 5]
        line2: [5, 6]
        line3: [6, 4]
        touchpoints: {type: ord-conjunction, args: [p0, p1, p2]}

    templates:
      - "{point} {loc} the incenter of {desc} with touchpoints {touchpoints}"
      - "{triangle} has incenter {point} and touchpoints {touchpoints}"

excenter: # x a b c
    num_args: 4

    rules:
        point: [0]
        triangle: [1, 2, 3]
        points: {type: conjunction, args: [p1, p2, p3]}
        desc: {type: ref, args: [points, triangle]}
        the: {type: literal, args: ['the', 'the point of']}
        meet: {type: literal, args: ['intersection of the exterior angle bisectors',
                                     'concurrence of the exterior angle bisectors',
                                     'meeting point of the exterior angle bisectors']}
        loc: {type: literal, args: ['is', 'is located at', 'is at']}

    templates:
      - "{point} {loc} the excenter of {desc}"
      - "{triangle} has excenter {point}"
      - "the excenter of {triangle} {loc} {point}"
      - "{point} {loc} {the} {meet} of {triangle}"

excenter2: # X Y Z I A B C
    num_args: 7

    rules:
        point: [3]
        triangle: [4, 5, 6]
        points: {type: ord-conjunction, args: [p4, p5, p6]}
        desc: {type: ref, args: [points, triangle]}
        the: {type: literal, args: ['the', 'the point of']}
        meet: {type: literal, args: ['intersection of the exterior angle bisectors',
                                     'concurrence of the exterior angle bisectors',
                                     'meeting point of the exterior angle bisectors']}
        loc: {type: literal, args: ['is', 'is located at', 'is at']}
        incircle: {type: literal, args: ['incircle', 'the incircle']}
        touches: {type: literal, args: ['touches', 'intersects', 'meets']}
        line1: [4, 5]
        line2: [5, 6]
        line3: [6, 4]
        touchpoints: {type: ord-conjunction, args: [p0, p1, p2]}

    templates:
      - "{point} {loc} the excenter of {desc} with touchpoints {touchpoints}"
      - "{triangle} has excenter {point} and touchpoints {touchpoints}"

centroid: # x y z i a b c
    num_args: 7

    rules:
        point: [3]
        triangle: [4, 5, 6]
        points: {type: conjunction, args: [p4, p5, p6]}
        desc: {type: ref, args: [points, triangle]}
        the: {type: literal, args: ['the', 'the point of']}
        meet: {type: literal, args: ['intersection of the medians', 'concurrence of the medians',
                                     'meeting point of the medians']}
        loc: {type: literal, args: ['is', 'is located at', 'is at']}

    templates:
      - "{point} {loc} the centroid of {desc}"
      - "{triangle} has centroid {point}"
      - "the centroid of {triangle} {loc} {point}"
      - "{point} {loc} {the} {meet} of {triangle}"

ninepoints: # x y z i a b c
    num_args: 7

    rules:
        point: [3]
        triangle: [4, 5, 6]
        mid_pt1: [0]
        mid_pt2: [1]
        mid_pt3: [2]
        line1: [4, 5]
        line2: [5, 6]
        line3: [6, 4]
        points: {type: conjunction, args: [p4, p5, p6]}
        desc: {type: ref, args: [points, triangle]}
        the: {type: literal, args: ['the', 'the point of']}
        loc: {type: literal, args: ['is', 'is located at', 'is at']}

    templates:
      - "{point} {loc} the centre of the nine-point circle of {desc}. the circle intersects the sides {line2}, {line3}, and {line1} at {mid_pt1}, {mid_pt2}, and {mid_pt3} respectively"
      - "{triangle} has nine-point center {point} and the circle intersects the sides {line2}, {line3}, and {line1} at {mid_pt1}, {mid_pt2}, and {mid_pt3} respectively"
      - "the nine-point center of {triangle} {loc} {point}. the circle intersects the sides {line2}, {line3}, and {line1} at {mid_pt1}, {mid_pt2}, and {mid_pt3} respectively"
      - "{point} {loc} the centre of the nine-point circle of {desc}. the circle intersects the sides {line2}, {line3}, and {line1} at {mid_pt1}, {mid_pt2}, and {mid_pt3} respectively"
      - "{triangle} has nine-point center {point} and the circle intersects the sides {line2}, at {mid_pt1}, {line3}, at {mid_pt2}, and {line1}, at {mid_pt3}"
      - "the nine-point center of {triangle} {loc} {point}. the circle intersects the sides {line2}, at {mid_pt1}, {line3}, at {mid_pt2}, and {line1}, at {mid_pt3}"

intersection_cc: # x o w a
  num_args: 4

  rules:
    _circle1: [1, 3]
    _circle2: [2, 3]
    intersection: {type: literal, args: ['intersects', 'meets']}
    where: {type: literal, args: ['at', 'at the points']}
    points: {type: conjunction, args: [p0, p3]}

  templates:
    - "{_circle1} {intersection} {_circle2} {where} {points}"

intersection_lc: # x a o b
  num_args: 4

  rules:
    line: [1, 3]
    _circle1: [2, 3]
    intersection: {type: literal, args: ['intersects', 'meets']}
    where: {type: literal, args: ['at', 'at the points']}
    points: {type: conjunction, args: [p0, p3]}

  templates:
    - "{line} {intersection} {_circle1} {where} {points}"

intersection_ll: # x a b c d
    num_args: 5

    rules:
        line1: [1, 2]
        line2: [3, 4]
        intersection: {type: literal, args: ['intersects', 'meets']}
        where: {type: literal, args: ['at', 'at the point']}
        point: [0]

    templates:
        - "{line1} {intersection} {line2} {where} {point}"

intersection_lp: # x a b c m n
    num_args: 6

    rules:
        line1: [1, 2]  # a, b
        line2: [4, 5]  # m, n
        point1: [3]  # c
        point2: [0]  # x
        intersection: {type: literal, args: ['intersects', 'meets', 'crosses']}
        where: {type: literal, args: ['at', 'at the point']}
        
    templates:
        - "Parallel {line2} through {point1} {intersection} {line1} at {point2}"

intersection_lt: # x a b c d e
    num_args: 6

    rules:
        point: [0]
        line1: [1, 2]  # a, b
        line2: [4, 5]  # d, e
        line3: [3, 0]  # c, x
        intersection: {type: literal, args: ['intersects', 'meets', 'crosses']}
        perpend: {type: literal, args: ['perpendicular', 'at right angle']}
        where: {type: literal, args: ['at', 'at the point']}

    templates:
          - "{line1} not {perpendicular} to {line2}. {line3} {perpendicular} to {line2} {intersection} {line1} {where} {point}"

intersection_pp: # x a b c d e f
    num_args: 7

    rules:
        point: [0]
        line1: [0, 1]  # x, a
        line2: [2, 3]  # b, c
        line3: [4, 0]  # d, x
        line4: [5, 6]  # e, f
        paarallel: {type: literal, args: ['parallel', ]}
        parallel2: {type: literal, args: ['||', ]}
        intersection: {type: literal, args: ['intersects', 'meets', 'crosses']}
        where: {type: literal, args: ['at', 'at the point']}

    templates:
        - "{line1} and {line2} are {paarallel}. {line3} and {line4} are {paarallel}. {line1} {intersection} {line3} {where} {point}"
        - "{line1} {parallel2} {line2}. {line3} {parallel2} {line4}. {line1} {intersection} {line3} {where} {point}"

intersection_tt: # x a b c d e f
    num_args: 7

    rules:
        point: [0]
        line1: [2, 3] # b, c
        line2: [5, 6] # e, f
        line3: [1, 0] # a, x
        line4: [4, 0] # d, x
        paarallel: { type: literal, args: [ 'parallel', ] }
        parallel2: { type: literal, args: [ '||', ] }
        intersection: {type: literal, args: ['intersects', 'meets', 'crosses']}
        perpend: {type: literal, args: ['perpendicular', 'at right angle']}
        where: {type: literal, args: ['at', 'at the point']}

    templates:
        - "{line1} and {line2} are {paarallel}. {line3} {perpend} to {line1}. {line4} {perpend} to {line2}. {line3} {intersection} {line4} {where} {point}"
        - "{line1} {parallel2} {line2}. {line3} {perpend} to {line1}. {line4} {perpend} to {line2}. {line3} {intersection} {line4} {where} {point}"
        - "{line1} and {line2} are {paarallel}. {line3} {perpend} to {line1}. {line4} and {line3} are {perpend} to {line2} and {line1} respectively. They intersect at {point}"
        - "{line1} {parallel2} {line2}. {line3} {perpend} to {line1}. {line4} and {line3} are {perpend} to {line2} and {line1} respectively. They intersect at {point}"

iso_triangle: # a b c
    num_args: 3

    rules:
        triangle: [0, 1, 2]
        line1: [1, 2] # b, c
        line2: [2, 0] # c, a
        line3: [0, 1] # a, b
        angle1: [ 1, 2, 0 ] # b, c, a
        angle2: [ 0, 1, 2 ] # a, b, c
        equal: {type: literal, args: ['equal to', 'congruent to', 'equivalent to', '=']}

    templates:
        - "{triangle} is an isosceles triangle with {line2} {equal} {line3}"
        - "{triangle} is an isosceles triangle with {line1} as base"
        - "{triangle} is an isosceles triangle with {angle1} {equal} {angle2}"





segment: # a b
  num_args: 2

  rules:
    line: [0, 1]
    points: {type: conjunction, args: [p0, p1]}
    desc: {type: ref, args: [points,]}
    the: {type: literal, args: ['the', 'the segment']}
    is: {type: literal, args: ['is', 'is the segment']}

    templates:
        - "{desc} is a segment of {line}"

midpoint: # x y z
    num_args: 3

    rules:
        point: [0]
        segment1: {type: conjunction, args: [p0, p2]}
        segment2: {type: conjunction, args: [p1, p0]}
        line3: [1, 2]
        midpoint: {type: literal, args: ['midpoint', 'the midpoint']}
        length: {type: literal, args: ['length of', 'the length of', 'distance between', 'the distance between']}
        where: {type: literal, args: ['such that', 'where']}
        equal: {type: literal, args: ['equal', 'congruent', 'equivalent']}

    templates:
      - "{point} is the {midpoint} of {line3}"
      - "{point} is a point {where} {length} {segment1} {equal} {length} {segment2}"